# This file is automatically generated from cmake.toml - DO NOT EDIT
# See https://github.com/build-cpp/cmkr for more information

cmake_minimum_required(VERSION 3.15)

if(CMAKE_SOURCE_DIR STREQUAL CMAKE_BINARY_DIR)
	message(FATAL_ERROR "In-tree builds are not supported. Run CMake from a separate directory: cmake -B build")
endif()

set(CMKR_ROOT_PROJECT OFF)
if(CMAKE_CURRENT_SOURCE_DIR STREQUAL CMAKE_SOURCE_DIR)
	set(CMKR_ROOT_PROJECT ON)

	# Bootstrap cmkr and automatically regenerate CMakeLists.txt
	include(cmkr.cmake OPTIONAL RESULT_VARIABLE CMKR_INCLUDE_RESULT)
	if(CMKR_INCLUDE_RESULT)
		cmkr()
	endif()

	# Enable folder support
	set_property(GLOBAL PROPERTY USE_FOLDERS ON)

	# Create a configure-time dependency on cmake.toml to improve IDE support
	set_property(DIRECTORY APPEND PROPERTY CMAKE_CONFIGURE_DEPENDS cmake.toml)
endif()

# Variables
set(CMAKE_CONFIGURATION_TYPES "Debug;RelWithDebInfo")
set(RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/bin")
set(LIBRARY_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/lib")
set(PROJECT_TARGET ND)

# vcpkg settings
project(ND.ModClient
	LANGUAGES
		C
		CXX
	VERSION
		1.3.2
)

add_compile_options(
    $<$<CONFIG:Debug>:/MDd>
    $<$<CONFIG:RelWithDebInfo>:/MD>
    $<$<CONFIG:RelWithDebInfo>:/Od>
    # noise 
    -Wno-unused-private-field
    -Wno-unused-variable
    -Wno-ignored-qualifiers
    -Wno-reorder-ctor
    -Wno-microsoft-unqualified-friend
)

set(SAFETYHOOK_FETCH_ZYDIS ON)
set(CMAKE_MSVC_RUNTIME_LIBRARY "MultiThreaded$<$<CONFIG:Debug>:Debug>")

if(CMKR_ROOT_PROJECT AND NOT CMKR_DISABLE_VCPKG)
	include(FetchContent)
	# Fix warnings about DOWNLOAD_EXTRACT_TIMESTAMP
	if(POLICY CMP0135)
		cmake_policy(SET CMP0135 NEW)
	endif()
	message(STATUS "Fetching vcpkg (https://github.com/microsoft/vcpkg/archive/a8954b904ad2a6939ecd8fc213e87702fa1243ea.tar.gz)...")
	FetchContent_Declare(vcpkg
		URL
			"https://github.com/microsoft/vcpkg/archive/a8954b904ad2a6939ecd8fc213e87702fa1243ea.tar.gz"
		SUBBUILD_DIR
			"CMakeFiles/vcpkg-subbuild"
		SOURCE_DIR
			vcpkg
		BINARY_DIR
			"CMakeFiles/vcpkg-build"
	)
	FetchContent_MakeAvailable(vcpkg)

	if(CMAKE_HOST_SYSTEM_NAME STREQUAL Darwin AND CMAKE_OSX_ARCHITECTURES STREQUAL "")
		set(CMAKE_OSX_ARCHITECTURES ${CMAKE_HOST_SYSTEM_PROCESSOR} CACHE STRING "" FORCE)
	endif()
	include("${vcpkg_SOURCE_DIR}/scripts/buildsystems/vcpkg.cmake")
endif()

# Packages
find_package(Boost 1.85.0 REQUIRED
	COMPONENTS
		thread
		signals2
)

include(FetchContent)

message(STATUS "Fetching simpleini (09c21bda1dc1b578fa55f4a005d79b0afd481296)...")
FetchContent_Declare(simpleini
	GIT_REPOSITORY
		"https://github.com/brofield/simpleini"
	GIT_TAG
		09c21bda1dc1b578fa55f4a005d79b0afd481296
)
FetchContent_MakeAvailable(simpleini)

message(STATUS "Fetching safetyhook (629558c64009a7291ba6ed5cfb49187086a27a47)...")
FetchContent_Declare(safetyhook
	GIT_REPOSITORY
		"https://github.com/cursey/safetyhook"
	GIT_TAG
		629558c64009a7291ba6ed5cfb49187086a27a47
)
FetchContent_MakeAvailable(safetyhook)

message(STATUS "Fetching nlohmann_json (55f93686c01528224f448c19128836e7df245f72)...")
FetchContent_Declare(nlohmann_json
	GIT_REPOSITORY
		"https://github.com/nlohmann/json"
	GIT_TAG
		55f93686c01528224f448c19128836e7df245f72
)
FetchContent_MakeAvailable(nlohmann_json)

# Target: spdlog
set(spdlog_SOURCES
	cmake.toml
	"dependencies/external/spdlog/src/async.cpp"
	"dependencies/external/spdlog/src/bundled_fmtlib_format.cpp"
	"dependencies/external/spdlog/src/cfg.cpp"
	"dependencies/external/spdlog/src/color_sinks.cpp"
	"dependencies/external/spdlog/src/file_sinks.cpp"
	"dependencies/external/spdlog/src/spdlog.cpp"
	"dependencies/external/spdlog/src/stdout_sinks.cpp"
)

add_library(spdlog STATIC)

target_sources(spdlog PRIVATE ${spdlog_SOURCES})
source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${spdlog_SOURCES})

add_library(spdlog::spdlog ALIAS spdlog)
target_compile_definitions(spdlog PUBLIC
	SPDLOG_COMPILED_LIB
	SPDLOG_WCHAR_TO_UTF8_SUPPORT
)

target_include_directories(spdlog PUBLIC
	"dependencies/external/spdlog/include"
)

# Target: glm_static
set(glm_static_SOURCES
	cmake.toml
	"dependencies/external/glm/glm/detail/glm.cpp"
)

add_library(glm_static STATIC)

target_sources(glm_static PRIVATE ${glm_static_SOURCES})
source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${glm_static_SOURCES})

add_library(glm::glm ALIAS glm_static)
target_include_directories(glm_static PUBLIC
	"dependencies/external/glm"
)

# Target: Utility
set(Utility_SOURCES
	cmake.toml
	"shared/Utility/ansi.hpp"
	"shared/Utility/assertion/assert.cpp"
	"shared/Utility/assertion/assert.hpp"
	"shared/Utility/cmacros/for_each.hpp"
	"shared/Utility/color.hpp"
	"shared/Utility/function_ptr.hpp"
	"shared/Utility/helper.cpp"
	"shared/Utility/helper.hpp"
	"shared/Utility/memory/Address.hpp"
	"shared/Utility/memory/FunctionHook.cpp"
	"shared/Utility/memory/FunctionHook.hpp"
	"shared/Utility/memory/Module.cpp"
	"shared/Utility/memory/Module.hpp"
	"shared/Utility/memory/Patch.cpp"
	"shared/Utility/memory/Patch.hpp"
	"shared/Utility/memory/Pattern.cpp"
	"shared/Utility/memory/Pattern.hpp"
	"shared/Utility/memory/String.cpp"
	"shared/Utility/memory/String.hpp"
	"shared/Utility/memory/proc-memory.cpp"
	"shared/Utility/memory/proc-memory.hpp"
	"shared/Utility/system/clipboard.cpp"
	"shared/Utility/system/clipboard.hpp"
)

add_library(Utility STATIC)

target_sources(Utility PRIVATE ${Utility_SOURCES})
source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${Utility_SOURCES})

add_library(Utility::Utility ALIAS Utility)
target_compile_definitions(Utility PUBLIC
	"PROJECT_NAME=\"${PROJECT_TARGET}.ModClient\""
)

target_compile_features(Utility PUBLIC
	cxx_std_23
)

target_compile_options(Utility PUBLIC
	"/MP"
)

target_link_libraries(Utility PUBLIC
	spdlog::spdlog
	safetyhook
)

target_link_libraries(Utility PRIVATE
	Boost::signals2
)

# Target: T1XSDK
set(CMKR_TARGET T1XSDK)
set(PROJECT_TARGET "T1X") 

set(T1XSDK_SOURCES
	cmake.toml
	"shared/NdGameSdk/components/SdkComponent.cpp"
	"shared/NdGameSdk/components/SdkComponent.hpp"
	"shared/NdGameSdk/components/SdkModule.cpp"
	"shared/NdGameSdk/components/SdkModule.hpp"
	"shared/NdGameSdk/components/SdkRegenny.hpp"
	"shared/NdGameSdk/components/SdkSubComponent.cpp"
	"shared/NdGameSdk/components/SdkSubComponent.hpp"
	"shared/NdGameSdk/components/event/SdkAction.hpp"
	"shared/NdGameSdk/components/event/SdkEvent.hpp"
	"shared/NdGameSdk/config/DevModeCfg.hpp"
	"shared/NdGameSdk/config/MemoryCfg.hpp"
	"shared/NdGameSdk/database/database.cpp"
	"shared/NdGameSdk/database/database.hpp"
	"shared/NdGameSdk/ndgame/t1x/ndgame.cpp"
	"shared/NdGameSdk/ndgame/t1x/ndgame.hpp"
	"shared/NdGameSdk/ndgame/t1x/ndgamepatterns.hpp"
	"shared/NdGameSdk/ndgame/t1x/src/game/framestate.cpp"
	"shared/NdGameSdk/ndgame/t1x/src/game/framestate.hpp"
	"shared/NdGameSdk/ndgame/t1x/src/game/gameinfo.cpp"
	"shared/NdGameSdk/ndgame/t1x/src/game/gameinfo.hpp"
	"shared/NdGameSdk/ndgame/t1x/src/game/player/player-menu.cpp"
	"shared/NdGameSdk/ndgame/t1x/src/game/player/player-menu.hpp"
	"shared/NdGameSdk/ndgame/t1x/src/game/player/player.cpp"
	"shared/NdGameSdk/ndgame/t1x/src/game/player/player.hpp"
	"shared/NdGameSdk/ndgame/t1x/src/game/weapon/process-weapon-base.cpp"
	"shared/NdGameSdk/ndgame/t1x/src/game/weapon/process-weapon-base.hpp"
	"shared/NdGameSdk/ndgame/t1x/src/game/weapon/process-weapon.cpp"
	"shared/NdGameSdk/ndgame/t1x/src/game/weapon/process-weapon.hpp"
	"shared/NdGameSdk/regenny/t1x/RelocatableHeapRecord.hpp"
	"shared/NdGameSdk/regenny/t1x/ndgame/game/FrameState.hpp"
	"shared/NdGameSdk/regenny/t1x/ndgame/game/GameInfo.hpp"
	"shared/NdGameSdk/regenny/t1x/ndgame/game/weapon/ScriptWeaponArt.hpp"
	"shared/NdGameSdk/regenny/t1x/process.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/corelib/containers/FixedSizeHeap.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/corelib/containers/TaggedHeap.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/corelib/memory/Allocator.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/corelib/memory/Context.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/corelib/memory/MapId.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/corelib/memory/MemoryMapEntry.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/corelib/util/MsgCon.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/gamelib/state_script/CFunctionStack.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/gamelib/state_script/ScriptCFuncContext.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/gamelib/state_script/StateScriptConsoleInfo.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/EngineComponents.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/FrameParams.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/NdConfig.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/NdFrameState.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/NdGameInfo.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/debug/DMENU.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/process/process.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/render/WindowContext.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/render/WindowContextType.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/render/text/DebugStringBase.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/render/util/PrimServer.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/script/DC/Entry.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/script/DC/Header.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/script/DC/joypad/AnalogStickIconPath.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/script/DC/joypad/CommandList.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/script/DC/joypad/MouseSettings.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/script/DC/joypad/actionmap.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/script/DC/joypad/actionscheme.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/script/DC/joypad/presets.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/script/DC/map.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/script/DC/modules/modules.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/script/LookupDcEntry.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/script/ModuleBucket.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/script/ModuleBucketMap.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/script/ModuleInfo.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/script/ModuleRequest.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/script/ScriptCFunc.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/script/ScriptManagerGlobals.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/script/ScriptModule.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/script/ScriptValue.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/script/relocatableModule.hpp"
	"shared/NdGameSdk/regenny/t1x/shared/ndlib/util/BitReader.hpp"
	"shared/NdGameSdk/sdk.cpp"
	"shared/NdGameSdk/sdk.hpp"
	"shared/NdGameSdk/sdkconfig.hpp"
	"shared/NdGameSdk/sdkconst.hpp"
	"shared/NdGameSdk/sdkdatabase.cpp"
	"shared/NdGameSdk/sdkdatabase.hpp"
	"shared/NdGameSdk/sdkderived.hpp"
	"shared/NdGameSdk/sdkexception.hpp"
	"shared/NdGameSdk/sdklogger.cpp"
	"shared/NdGameSdk/sdklogger.hpp"
	"shared/NdGameSdk/sdkpattern.hpp"
	"shared/NdGameSdk/sdkstringid.hpp"
	"shared/NdGameSdk/shared/shared.cpp"
	"shared/NdGameSdk/shared/shared.hpp"
	"shared/NdGameSdk/shared/sharedpatterns.hpp"
	"shared/NdGameSdk/shared/src/common/common-allocator.cpp"
	"shared/NdGameSdk/shared/src/common/common-allocator.hpp"
	"shared/NdGameSdk/shared/src/common/common-game-config.cpp"
	"shared/NdGameSdk/shared/src/common/common-game-config.hpp"
	"shared/NdGameSdk/shared/src/common/common-game-init.cpp"
	"shared/NdGameSdk/shared/src/common/common-game-init.hpp"
	"shared/NdGameSdk/shared/src/common/common-game-loop.cpp"
	"shared/NdGameSdk/shared/src/common/common-game-loop.hpp"
	"shared/NdGameSdk/shared/src/common/common-main-win.cpp"
	"shared/NdGameSdk/shared/src/common/common-main-win.hpp"
	"shared/NdGameSdk/shared/src/common/win/nxapp-hooks.cpp"
	"shared/NdGameSdk/shared/src/common/win/nxapp-hooks.hpp"
	"shared/NdGameSdk/shared/src/corelib/containers/fixedsizeheap.cpp"
	"shared/NdGameSdk/shared/src/corelib/containers/fixedsizeheap.hpp"
	"shared/NdGameSdk/shared/src/corelib/containers/tagged-heap.cpp"
	"shared/NdGameSdk/shared/src/corelib/containers/tagged-heap.hpp"
	"shared/NdGameSdk/shared/src/corelib/memory/allocator-heap.cpp"
	"shared/NdGameSdk/shared/src/corelib/memory/allocator-heap.hpp"
	"shared/NdGameSdk/shared/src/corelib/memory/allocator-tagged-heap.cpp"
	"shared/NdGameSdk/shared/src/corelib/memory/allocator-tagged-heap.hpp"
	"shared/NdGameSdk/shared/src/corelib/memory/memory-area-win.cpp"
	"shared/NdGameSdk/shared/src/corelib/memory/memory-area-win.hpp"
	"shared/NdGameSdk/shared/src/corelib/memory/memory-map.cpp"
	"shared/NdGameSdk/shared/src/corelib/memory/memory-map.hpp"
	"shared/NdGameSdk/shared/src/corelib/memory/memory.cpp"
	"shared/NdGameSdk/shared/src/corelib/memory/memory.hpp"
	"shared/NdGameSdk/shared/src/corelib/system/platform/synchronized.hpp"
	"shared/NdGameSdk/shared/src/corelib/system/platform/thread.hpp"
	"shared/NdGameSdk/shared/src/gamelib/debug/nd-dev-menu.cpp"
	"shared/NdGameSdk/shared/src/gamelib/debug/nd-dev-menu.hpp"
	"shared/NdGameSdk/shared/src/gamelib/render/particle/particle-debug.cpp"
	"shared/NdGameSdk/shared/src/gamelib/render/particle/particle-debug.hpp"
	"shared/NdGameSdk/shared/src/gamelib/render/particle/particle.cpp"
	"shared/NdGameSdk/shared/src/gamelib/render/particle/particle.hpp"
	"shared/NdGameSdk/shared/src/gamelib/script/nd-script-funcs.cpp"
	"shared/NdGameSdk/shared/src/gamelib/script/nd-script-funcs.hpp"
	"shared/NdGameSdk/shared/src/gamelib/statescript/ss-context.cpp"
	"shared/NdGameSdk/shared/src/gamelib/statescript/ss-context.hpp"
	"shared/NdGameSdk/shared/src/gamelib/statescript/ss-manager.cpp"
	"shared/NdGameSdk/shared/src/gamelib/statescript/ss-manager.hpp"
	"shared/NdGameSdk/shared/src/ndlib/debug/nd-dmenu.cpp"
	"shared/NdGameSdk/shared/src/ndlib/debug/nd-dmenu.hpp"
	"shared/NdGameSdk/shared/src/ndlib/engine-components.cpp"
	"shared/NdGameSdk/shared/src/ndlib/engine-components.hpp"
	"shared/NdGameSdk/shared/src/ndlib/io/package-mgr.cpp"
	"shared/NdGameSdk/shared/src/ndlib/io/package-mgr.hpp"
	"shared/NdGameSdk/shared/src/ndlib/io/package.cpp"
	"shared/NdGameSdk/shared/src/ndlib/io/package.hpp"
	"shared/NdGameSdk/shared/src/ndlib/nd-config.cpp"
	"shared/NdGameSdk/shared/src/ndlib/nd-config.hpp"
	"shared/NdGameSdk/shared/src/ndlib/nd-frame-state.cpp"
	"shared/NdGameSdk/shared/src/ndlib/nd-frame-state.hpp"
	"shared/NdGameSdk/shared/src/ndlib/nd-game-info.cpp"
	"shared/NdGameSdk/shared/src/ndlib/nd-game-info.hpp"
	"shared/NdGameSdk/shared/src/ndlib/render/dev/debugdraw-common.cpp"
	"shared/NdGameSdk/shared/src/ndlib/render/dev/debugdraw-common.hpp"
	"shared/NdGameSdk/shared/src/ndlib/render/frame-params.cpp"
	"shared/NdGameSdk/shared/src/ndlib/render/frame-params.hpp"
	"shared/NdGameSdk/shared/src/ndlib/render/text/string-builder.h"
	"shared/NdGameSdk/shared/src/ndlib/render/util/msg-con-draw.cpp"
	"shared/NdGameSdk/shared/src/ndlib/render/util/msg-con-draw.hpp"
	"shared/NdGameSdk/shared/src/ndlib/render/util/msg.cpp"
	"shared/NdGameSdk/shared/src/ndlib/render/util/msg.hpp"
	"shared/NdGameSdk/shared/src/ndlib/render/util/prim.cpp"
	"shared/NdGameSdk/shared/src/ndlib/render/util/prim.hpp"
	"shared/NdGameSdk/shared/src/ndlib/render/util/text.cpp"
	"shared/NdGameSdk/shared/src/ndlib/render/util/text.hpp"
	"shared/NdGameSdk/shared/src/ndlib/render/window-context.cpp"
	"shared/NdGameSdk/shared/src/ndlib/render/window-context.hpp"
	"shared/NdGameSdk/shared/src/ndlib/script/dc/data-compilation.hpp"
	"shared/NdGameSdk/shared/src/ndlib/script/dc/modules.hpp"
	"shared/NdGameSdk/shared/src/ndlib/script/module-info.cpp"
	"shared/NdGameSdk/shared/src/ndlib/script/module-info.hpp"
	"shared/NdGameSdk/shared/src/ndlib/script/script-manager-eval.cpp"
	"shared/NdGameSdk/shared/src/ndlib/script/script-manager-eval.hpp"
	"shared/NdGameSdk/shared/src/ndlib/script/script-manager.cpp"
	"shared/NdGameSdk/shared/src/ndlib/script/script-manager.hpp"
	"shared/NdGameSdk/shared/src/ndlib/script/script-module.cpp"
	"shared/NdGameSdk/shared/src/ndlib/script/script-module.hpp"
	"shared/NdGameSdk/sidbase/sidbase.cpp"
	"shared/NdGameSdk/sidbase/sidbase.hpp"
)

add_library(T1XSDK SHARED)

target_sources(T1XSDK PRIVATE ${T1XSDK_SOURCES})
source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${T1XSDK_SOURCES})

target_compile_features(T1XSDK PUBLIC
	cxx_std_23
)

target_include_directories(T1XSDK PUBLIC
	"shared/"
)

target_link_libraries(T1XSDK PUBLIC
	spdlog::spdlog
	glm_static
	nlohmann_json
	Utility
	Boost::thread
	Boost::signals2
	Boost::container
)

target_compile_definitions(T1XSDK PUBLIC
	T1X
	"ND_GAME_NAME=\"${PROJECT_TARGET}\""
)

set_target_properties(T1XSDK PROPERTIES
	OUTPUT_NAME
		NdGameSdk
	RUNTIME_OUTPUT_DIRECTORY
		"${RUNTIME_OUTPUT_DIRECTORY}/${PROJECT_TARGET}"
	LIBRARY_OUTPUT_DIRECTORY
		"${LIBRARY_OUTPUT_DIRECTORY}/${PROJECT_TARGET}"
	ARCHIVE_OUTPUT_DIRECTORY
		"${LIBRARY_OUTPUT_DIRECTORY}/${PROJECT_TARGET}"
)

# Target: T1X
set(CMKR_TARGET T1X)
set(T1X_SOURCES
	cmake.toml
	"src/Main.cpp"
	"src/NdDerived.hpp"
	"src/NdMod.hpp"
	"src/NdModClient.cpp"
	"src/NdModClient.hpp"
	"src/NdModClientException.hpp"
	"src/NdMods.cpp"
	"src/NdMods.hpp"
	"src/NdMods/DevSandboxMod.cpp"
	"src/NdMods/DevSandboxMod.hpp"
	"src/Utils/config.cpp"
	"src/Utils/config.hpp"
	"src/Utils/logger.cpp"
	"src/Utils/logger.hpp"
)

add_library(T1X SHARED)

target_sources(T1X PRIVATE ${T1X_SOURCES})
source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${T1X_SOURCES})

target_compile_definitions(T1X PUBLIC
	${CMKR_TARGET}
	"ND_GAME_NAME=\"${CMKR_TARGET}\""
	ND_ModClient_EXPORTS
	"ND_MODCLIENT_VERSION=\"${PROJECT_VERSION}\""
)

target_compile_features(T1X PUBLIC
	cxx_std_23
)

target_include_directories(T1X PUBLIC
	"shared/"
	"src/"
)

target_link_libraries(T1X PUBLIC
	${CMKR_TARGET}SDK
	Utility
	spdlog::spdlog
)

target_link_libraries(T1X PRIVATE
	Boost::thread
	Boost::signals2
	SimpleIni
)

set_target_properties(T1X PROPERTIES
	OUTPUT_NAME
		${PROJECT_TARGET}.ModClient
	SUFFIX
		.asi
	RUNTIME_OUTPUT_DIRECTORY
		"${RUNTIME_OUTPUT_DIRECTORY}/${PROJECT_TARGET}"
	LIBRARY_OUTPUT_DIRECTORY
		"${LIBRARY_OUTPUT_DIRECTORY}/${PROJECT_TARGET}"
	ARCHIVE_OUTPUT_DIRECTORY
		"${LIBRARY_OUTPUT_DIRECTORY}/${PROJECT_TARGET}"
	CXX_MODULE_STD
		ON
)

# Target: T2RSDK
set(CMKR_TARGET T2RSDK)
 
set(PROJECT_TARGET "T2R") 

set(T2RSDK_SOURCES
	cmake.toml
	"shared/NdGameSdk/components/SdkComponent.cpp"
	"shared/NdGameSdk/components/SdkComponent.hpp"
	"shared/NdGameSdk/components/SdkModule.cpp"
	"shared/NdGameSdk/components/SdkModule.hpp"
	"shared/NdGameSdk/components/SdkRegenny.hpp"
	"shared/NdGameSdk/components/SdkSubComponent.cpp"
	"shared/NdGameSdk/components/SdkSubComponent.hpp"
	"shared/NdGameSdk/components/event/SdkAction.hpp"
	"shared/NdGameSdk/components/event/SdkEvent.hpp"
	"shared/NdGameSdk/config/DevModeCfg.hpp"
	"shared/NdGameSdk/config/MemoryCfg.hpp"
	"shared/NdGameSdk/database/database.cpp"
	"shared/NdGameSdk/database/database.hpp"
	"shared/NdGameSdk/ndgame/t2r/ndgame.cpp"
	"shared/NdGameSdk/ndgame/t2r/ndgame.hpp"
	"shared/NdGameSdk/ndgame/t2r/ndgamepatterns.hpp"
	"shared/NdGameSdk/ndgame/t2r/src/game/framestate.cpp"
	"shared/NdGameSdk/ndgame/t2r/src/game/framestate.hpp"
	"shared/NdGameSdk/ndgame/t2r/src/game/gameinfo.cpp"
	"shared/NdGameSdk/ndgame/t2r/src/game/gameinfo.hpp"
	"shared/NdGameSdk/ndgame/t2r/src/game/player/player-menu.cpp"
	"shared/NdGameSdk/ndgame/t2r/src/game/player/player-menu.hpp"
	"shared/NdGameSdk/ndgame/t2r/src/game/player/player.cpp"
	"shared/NdGameSdk/ndgame/t2r/src/game/player/player.hpp"
	"shared/NdGameSdk/ndgame/t2r/src/game/weapon/process-weapon.cpp"
	"shared/NdGameSdk/ndgame/t2r/src/game/weapon/process-weapon.hpp"
	"shared/NdGameSdk/regenny/t2r/ndgame/game/FrameState.hpp"
	"shared/NdGameSdk/regenny/t2r/ndgame/game/GameInfo.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/corelib/containers/FixedSizeHeap.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/corelib/containers/TaggedHeap.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/corelib/memory/Allocator.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/corelib/memory/Context.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/corelib/memory/MapId.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/corelib/memory/MemoryMapEntry.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/corelib/util/MsgCon.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/corelib/util/NameCache.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/gamelib/level/DataLoading.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/gamelib/state_script/CFunctionStack.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/gamelib/state_script/ScriptCFuncContext.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/EngineComponents.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/FrameParams.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/NdConfig.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/NdFrameState.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/NdGameInfo.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/debug/DMENU.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/io/LoadingHeapMgr.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/io/Package.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/io/PackageMgr.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/io/PackageProcessingInfo.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/render/WindowContext.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/render/WindowContextType.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/render/text/DebugStringBase.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/render/util/PrimServer.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/script/DC/Entry.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/script/DC/Header.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/script/DC/map.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/script/DC/modules/modules.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/script/LookupDcEntry.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/script/ModuleBucket.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/script/ModuleBucketMap.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/script/ModuleInfo.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/script/ModuleRequest.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/script/ScriptCFunc.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/script/ScriptManagerGlobals.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/script/ScriptModule.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/script/ScriptValue.hpp"
	"shared/NdGameSdk/regenny/t2r/shared/ndlib/script/relocatableModule.hpp"
	"shared/NdGameSdk/sdk.cpp"
	"shared/NdGameSdk/sdk.hpp"
	"shared/NdGameSdk/sdkconfig.hpp"
	"shared/NdGameSdk/sdkconst.hpp"
	"shared/NdGameSdk/sdkdatabase.cpp"
	"shared/NdGameSdk/sdkdatabase.hpp"
	"shared/NdGameSdk/sdkderived.hpp"
	"shared/NdGameSdk/sdkexception.hpp"
	"shared/NdGameSdk/sdklogger.cpp"
	"shared/NdGameSdk/sdklogger.hpp"
	"shared/NdGameSdk/sdkpattern.hpp"
	"shared/NdGameSdk/sdkstringid.hpp"
	"shared/NdGameSdk/shared/shared.cpp"
	"shared/NdGameSdk/shared/shared.hpp"
	"shared/NdGameSdk/shared/sharedpatterns.hpp"
	"shared/NdGameSdk/shared/src/common/common-allocator.cpp"
	"shared/NdGameSdk/shared/src/common/common-allocator.hpp"
	"shared/NdGameSdk/shared/src/common/common-game-config.cpp"
	"shared/NdGameSdk/shared/src/common/common-game-config.hpp"
	"shared/NdGameSdk/shared/src/common/common-game-init.cpp"
	"shared/NdGameSdk/shared/src/common/common-game-init.hpp"
	"shared/NdGameSdk/shared/src/common/common-game-loop.cpp"
	"shared/NdGameSdk/shared/src/common/common-game-loop.hpp"
	"shared/NdGameSdk/shared/src/common/common-main-win.cpp"
	"shared/NdGameSdk/shared/src/common/common-main-win.hpp"
	"shared/NdGameSdk/shared/src/common/win/nxapp-hooks.cpp"
	"shared/NdGameSdk/shared/src/common/win/nxapp-hooks.hpp"
	"shared/NdGameSdk/shared/src/corelib/containers/fixedsizeheap.cpp"
	"shared/NdGameSdk/shared/src/corelib/containers/fixedsizeheap.hpp"
	"shared/NdGameSdk/shared/src/corelib/containers/tagged-heap.cpp"
	"shared/NdGameSdk/shared/src/corelib/containers/tagged-heap.hpp"
	"shared/NdGameSdk/shared/src/corelib/memory/allocator-heap.cpp"
	"shared/NdGameSdk/shared/src/corelib/memory/allocator-heap.hpp"
	"shared/NdGameSdk/shared/src/corelib/memory/allocator-tagged-heap.cpp"
	"shared/NdGameSdk/shared/src/corelib/memory/allocator-tagged-heap.hpp"
	"shared/NdGameSdk/shared/src/corelib/memory/memory-area-win.cpp"
	"shared/NdGameSdk/shared/src/corelib/memory/memory-area-win.hpp"
	"shared/NdGameSdk/shared/src/corelib/memory/memory-map.cpp"
	"shared/NdGameSdk/shared/src/corelib/memory/memory-map.hpp"
	"shared/NdGameSdk/shared/src/corelib/memory/memory.cpp"
	"shared/NdGameSdk/shared/src/corelib/memory/memory.hpp"
	"shared/NdGameSdk/shared/src/corelib/system/platform/synchronized.hpp"
	"shared/NdGameSdk/shared/src/corelib/system/platform/thread.hpp"
	"shared/NdGameSdk/shared/src/gamelib/debug/nd-dev-menu.cpp"
	"shared/NdGameSdk/shared/src/gamelib/debug/nd-dev-menu.hpp"
	"shared/NdGameSdk/shared/src/gamelib/render/particle/particle-debug.cpp"
	"shared/NdGameSdk/shared/src/gamelib/render/particle/particle-debug.hpp"
	"shared/NdGameSdk/shared/src/gamelib/render/particle/particle.cpp"
	"shared/NdGameSdk/shared/src/gamelib/render/particle/particle.hpp"
	"shared/NdGameSdk/shared/src/gamelib/script/nd-script-funcs.cpp"
	"shared/NdGameSdk/shared/src/gamelib/script/nd-script-funcs.hpp"
	"shared/NdGameSdk/shared/src/gamelib/statescript/ss-context.cpp"
	"shared/NdGameSdk/shared/src/gamelib/statescript/ss-context.hpp"
	"shared/NdGameSdk/shared/src/gamelib/statescript/ss-manager.cpp"
	"shared/NdGameSdk/shared/src/gamelib/statescript/ss-manager.hpp"
	"shared/NdGameSdk/shared/src/ndlib/debug/nd-dmenu.cpp"
	"shared/NdGameSdk/shared/src/ndlib/debug/nd-dmenu.hpp"
	"shared/NdGameSdk/shared/src/ndlib/engine-components.cpp"
	"shared/NdGameSdk/shared/src/ndlib/engine-components.hpp"
	"shared/NdGameSdk/shared/src/ndlib/io/package-mgr.cpp"
	"shared/NdGameSdk/shared/src/ndlib/io/package-mgr.hpp"
	"shared/NdGameSdk/shared/src/ndlib/io/package.cpp"
	"shared/NdGameSdk/shared/src/ndlib/io/package.hpp"
	"shared/NdGameSdk/shared/src/ndlib/nd-config.cpp"
	"shared/NdGameSdk/shared/src/ndlib/nd-config.hpp"
	"shared/NdGameSdk/shared/src/ndlib/nd-frame-state.cpp"
	"shared/NdGameSdk/shared/src/ndlib/nd-frame-state.hpp"
	"shared/NdGameSdk/shared/src/ndlib/nd-game-info.cpp"
	"shared/NdGameSdk/shared/src/ndlib/nd-game-info.hpp"
	"shared/NdGameSdk/shared/src/ndlib/render/dev/debugdraw-common.cpp"
	"shared/NdGameSdk/shared/src/ndlib/render/dev/debugdraw-common.hpp"
	"shared/NdGameSdk/shared/src/ndlib/render/frame-params.cpp"
	"shared/NdGameSdk/shared/src/ndlib/render/frame-params.hpp"
	"shared/NdGameSdk/shared/src/ndlib/render/text/string-builder.h"
	"shared/NdGameSdk/shared/src/ndlib/render/util/msg-con-draw.cpp"
	"shared/NdGameSdk/shared/src/ndlib/render/util/msg-con-draw.hpp"
	"shared/NdGameSdk/shared/src/ndlib/render/util/msg.cpp"
	"shared/NdGameSdk/shared/src/ndlib/render/util/msg.hpp"
	"shared/NdGameSdk/shared/src/ndlib/render/util/prim.cpp"
	"shared/NdGameSdk/shared/src/ndlib/render/util/prim.hpp"
	"shared/NdGameSdk/shared/src/ndlib/render/util/text.cpp"
	"shared/NdGameSdk/shared/src/ndlib/render/util/text.hpp"
	"shared/NdGameSdk/shared/src/ndlib/render/window-context.cpp"
	"shared/NdGameSdk/shared/src/ndlib/render/window-context.hpp"
	"shared/NdGameSdk/shared/src/ndlib/script/dc/data-compilation.hpp"
	"shared/NdGameSdk/shared/src/ndlib/script/dc/modules.hpp"
	"shared/NdGameSdk/shared/src/ndlib/script/module-info.cpp"
	"shared/NdGameSdk/shared/src/ndlib/script/module-info.hpp"
	"shared/NdGameSdk/shared/src/ndlib/script/script-manager-eval.cpp"
	"shared/NdGameSdk/shared/src/ndlib/script/script-manager-eval.hpp"
	"shared/NdGameSdk/shared/src/ndlib/script/script-manager.cpp"
	"shared/NdGameSdk/shared/src/ndlib/script/script-manager.hpp"
	"shared/NdGameSdk/shared/src/ndlib/script/script-module.cpp"
	"shared/NdGameSdk/shared/src/ndlib/script/script-module.hpp"
	"shared/NdGameSdk/sidbase/sidbase.cpp"
	"shared/NdGameSdk/sidbase/sidbase.hpp"
)

add_library(T2RSDK SHARED)

target_sources(T2RSDK PRIVATE ${T2RSDK_SOURCES})
source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${T2RSDK_SOURCES})

target_compile_features(T2RSDK PUBLIC
	cxx_std_23
)

target_include_directories(T2RSDK PUBLIC
	"shared/"
)

target_link_libraries(T2RSDK PUBLIC
	spdlog::spdlog
	glm_static
	nlohmann_json
	Utility
	Boost::thread
	Boost::signals2
	Boost::container
)

target_compile_definitions(T2RSDK PUBLIC
	T2R
	"ND_GAME_NAME=\"${PROJECT_TARGET}\""
)

set_target_properties(T2RSDK PROPERTIES
	OUTPUT_NAME
		NdGameSdk
	RUNTIME_OUTPUT_DIRECTORY
		"${RUNTIME_OUTPUT_DIRECTORY}/${PROJECT_TARGET}"
	LIBRARY_OUTPUT_DIRECTORY
		"${LIBRARY_OUTPUT_DIRECTORY}/${PROJECT_TARGET}"
	ARCHIVE_OUTPUT_DIRECTORY
		"${LIBRARY_OUTPUT_DIRECTORY}/${PROJECT_TARGET}"
)

# Target: T2R
set(CMKR_TARGET T2R)
set(T2R_SOURCES
	cmake.toml
	"src/Main.cpp"
	"src/NdDerived.hpp"
	"src/NdMod.hpp"
	"src/NdModClient.cpp"
	"src/NdModClient.hpp"
	"src/NdModClientException.hpp"
	"src/NdMods.cpp"
	"src/NdMods.hpp"
	"src/NdMods/DevSandboxMod.cpp"
	"src/NdMods/DevSandboxMod.hpp"
	"src/Utils/config.cpp"
	"src/Utils/config.hpp"
	"src/Utils/logger.cpp"
	"src/Utils/logger.hpp"
)

add_library(T2R SHARED)

target_sources(T2R PRIVATE ${T2R_SOURCES})
source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${T2R_SOURCES})

target_compile_definitions(T2R PUBLIC
	${CMKR_TARGET}
	"ND_GAME_NAME=\"${CMKR_TARGET}\""
	ND_ModClient_EXPORTS
	"ND_MODCLIENT_VERSION=\"${PROJECT_VERSION}\""
)

target_compile_features(T2R PUBLIC
	cxx_std_23
)

target_include_directories(T2R PUBLIC
	"shared/"
	"src/"
)

target_link_libraries(T2R PUBLIC
	${CMKR_TARGET}SDK
	Utility
	spdlog::spdlog
)

target_link_libraries(T2R PRIVATE
	Boost::thread
	Boost::signals2
	SimpleIni
)

set_target_properties(T2R PROPERTIES
	OUTPUT_NAME
		${PROJECT_TARGET}.ModClient
	SUFFIX
		.asi
	RUNTIME_OUTPUT_DIRECTORY
		"${RUNTIME_OUTPUT_DIRECTORY}/${PROJECT_TARGET}"
	LIBRARY_OUTPUT_DIRECTORY
		"${LIBRARY_OUTPUT_DIRECTORY}/${PROJECT_TARGET}"
	ARCHIVE_OUTPUT_DIRECTORY
		"${LIBRARY_OUTPUT_DIRECTORY}/${PROJECT_TARGET}"
	CXX_MODULE_STD
		ON
)
